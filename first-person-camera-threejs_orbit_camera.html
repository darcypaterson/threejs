<!DOCTYPE html>
<html>
<head>
	<title>First Person Perspective on Threejs Camera</title>
	<meta charset=utf-8>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body { margin: 0; }
		canvas { width: 100%; height: 100%; }
	</style>



</head>
<body>
	<script src="js/three.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script src="js/GLTFLoader.js"></script>
	
	<script src="js/BokehShader2.js"></script>
	<script src="js/CinematicCamera.js"></script>

	<script>

		var scene, camera, renderer, mesh;
		var meshFloor;

		var keyboard = {};
		var player = { height: 1.8, speed: 0.1, turnSpeed: Math.PI * 0.02 };

		function init() {

			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
			
// 			camera = new THREE.CinematicCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );		

			scene.background = new THREE.Color( 0x17B3FF);
			
			

// 			var effectController  = {
// 				focalLength: 20,
				// jsDepthCalculation: true,
				// shaderFocus: false,
				//
// 				fstop: 1.8,
				// maxblur: 1.0,
				//
// 				showFocus: false,
// 				focalDepth: 5,
				// manualdof: false,
				// vignetting: false,
				// depthblur: false,
				//
				// threshold: 0.5,
				// gain: 2.0,
				// bias: 0.5,
				// fringe: 0.7,
				//
				// focalLength: 35,
				// noise: true,
				// pentagon: false,
				//
				// dithering: 0.0001
// 			};
			
			
// 			var matChanger = function( ) {
// 				for ( var e in effectController ) {
// 					if ( e in camera.postprocessing.bokeh_uniforms ) {
// 						camera.postprocessing.bokeh_uniforms[ e ].value = effectController[ e ];
// 					}
// 				}
// 				camera.postprocessing.bokeh_uniforms[ 'znear' ].value = camera.near;
// 				camera.postprocessing.bokeh_uniforms[ 'zfar' ].value = camera.far;
// 				camera.setLens( effectController.focalLength, camera.frameHeight, effectController.fstop, camera.coc );
// 				effectController[ 'focalDepth' ] = camera.postprocessing.bokeh_uniforms[ 'focalDepth' ].value;
// 			};

// 			matChanger();

			// Polygons



			// Loader

// 				var loader = new THREE.GLTFLoader();
// 				loader.load( 'export-1-new.gltf', function ( gltf ) {
// 					scene.add( gltf.scene );
// 				}, undefined, function ( e ) {
// 					console.error( e );
// 				} );

			
			var loader = new THREE.GLTFLoader();
			loader.load("bp_scene_6.gltf", function ( gltf ) {

			scene.scale.x = 2;
			scene.scale.y = 2;
			scene.scale.z = 2;
			    scene.add( gltf.scene );


			});
			
			
			var womanLoader = new THREE.GLTFLoader();
			womanLoader.load("bp_scene_6_woman.gltf", function ( gltf ) {

			scene.scale.x = 2;
			scene.scale.y = 2;
			scene.scale.z = 2;
			    scene.add( gltf.scene );


			});

			
			var carLoader = new THREE.GLTFLoader();
			carLoader.load("bp_scene_6_car.gltf", function ( gltf ) {

			scene.scale.x = 2;
			scene.scale.y = 2;
			scene.scale.z = 2;
			    scene.add( gltf.scene );


			});

			var cloudLoader = new THREE.GLTFLoader();
			cloudLoader.load("bp_scene_6_clouds.gltf", function ( gltf ) {

			scene.scale.x = 2;
			scene.scale.y = 2;
			scene.scale.z = 2;
			    scene.add( gltf.scene );


			});
			

			// Camera

			camera.position.set(0, player.height, 25);
			// camera.lookAt(new THREE.Vector3(0, player.height, 0));

// 				camera.setLens( 5 );
// 				camera.position.set( 2, 1, 50 );


			// Lighting


			var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );
			directionalLight.position.set( -5, 5, -5 );
			scene.add( directionalLight );

			var light = new THREE.PointLight( 0xffffff, 1.2, 50, 2 );
			light.position.set( -0.5, 1, 0.5 );
			scene.add( light );

			// var light2 = new THREE.PointLight( 0xffffff, 1.3, 50, 2 );
			// light2.position.set( -1, 1, -1 );
			// scene.add( light2 );
			
			
			rectLight = new THREE.RectAreaLight( 0xffffff, 1, 10, 10 );
			rectLight.position.set( 5, 5, 0 );
			scene.add( rectLight );

			var ambLight = new THREE.AmbientLight( 0xffffff, 0.483 ); // soft white light
			ambLight.position.set( 0, 1, 0 );
			scene.add( ambLight );

			var spotLight = new THREE.SpotLight( 0xffffff, 0.3 );
			spotLight.position.set( 5, 10, 5 );
			spotLight.castShadow = true;
			spotLight.shadow.mapSize.width = 500;
			spotLight.shadow.mapSize.height = 500;
			spotLight.shadow.camera.near = .25;
			spotLight.shadow.camera.far = 1000;
			spotLight.shadow.camera.fov = 3;
			scene.add( spotLight );


			var sphereSize = 1;
			var spotLightHelper = new THREE.SpotLightHelper( spotLight, sphereSize );
			scene.add( spotLightHelper );

			// var pointLightHelper2 = new THREE.PointLightHelper( light2, sphereSize );
			// scene.add( pointLightHelper2 );

			var pointLightHelper = new THREE.PointLightHelper( light, sphereSize );
			scene.add( pointLightHelper );

			var dirhelper = new THREE.DirectionalLightHelper( directionalLight, 2 );
			scene.add( dirhelper );


			// Render 

			renderer = new THREE.WebGLRenderer( { antialias: true } );
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild(renderer.domElement);
			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.BasicShadowMap;

			// Resize to the size of the screen
			window.addEventListener('resize', function() {

				var width = window.innerWidth;
				var height = window.innerHeight;
				renderer.setSize( width, height );
				camera.aspect = width / height;
				camera.updateProjectionMatrix();


			});

			animate();

			controls = new THREE.OrbitControls( camera, renderer.domElement );
			controls.maxDistance = 300;
			controls.enablePan = true;
			controls.enableRotate = true;

		}

		function animate() {

			requestAnimationFrame(animate);

			// mesh.rotation.x += 0.01;
			// mesh.rotation.y += 0.02;

			renderer.render(scene, camera);






		}

		// function keyDown(e) {

		// 	keyboard[e.keyCode] = true;

		// }

		// function keyUp(e) {

		// 	keyboard[e.keyCode] = false;

		// }

		// window.addEventListener('keydown', keyDown);
		// window.addEventListener('keyup', keyUp);

	
		window.onload = init;


	</script>


</body>
</html>
